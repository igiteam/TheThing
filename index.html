<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>The Thing</title>

  <meta name="description"
    content="A The Thing port designed for running in vanilla JavaScript pre-ECMAScript 2015 (no WebAssembly) ">
  <meta name="keywords" content="The Thing">
  <link rel="icon" href="https://cdn.sdappnet.cloud/rtx/images/betateam.png" type="image/png">
  <link rel="apple-touch-icon" href="https://cdn.sdappnet.cloud/rtx/images/betateam.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://cdn.sdappnet.cloud/rtx/images/betateam.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://cdn.sdappnet.cloud/rtx/images/betateam.png" sizes="512x512">
  <meta itemprop="name" content="The Thing">
  <meta itemprop="description"
    content="A The Thing port designed for running in vanilla JavaScript pre-ECMAScript 2015 (no WebAssembly) ">
  <meta itemprop="image" content="https://cdn.sdappnet.cloud/rtx/images/TheThing-meta.png">
  <meta property="og:title" content="The Thing">
  <meta property="og:description"
    content="A The Thing port designed for running in vanilla JavaScript pre-ECMAScript 2015 (no WebAssembly) ">
  <meta property="og:image" content="https://cdn.sdappnet.cloud/rtx/images/TheThing-meta.png">
  <meta property="og:url" content="">
  <meta property="og:type" content="website">
  <meta name="twitter:title" content="The Thing">
  <meta name="twitter:description"
    content="A The Thing port designed for running in vanilla JavaScript pre-ECMAScript 2015 (no WebAssembly) ">
  <meta name="twitter:image" content="https://cdn.sdappnet.cloud/rtx/images/TheThing-meta.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="description"
    content="A The Thing port designed for running in vanilla JavaScript pre-ECMAScript 2015 (no WebAssembly) ">

  <link rel="apple-touch-icon" href="https://cdn.sdappnet.cloud/rtx/images/betateam.png" sizes="180x180">

  <meta itemprop="description"
    content="A The Thing port designed for running in vanilla JavaScript pre-ECMAScript 2015 (no WebAssembly) ">

  <meta property="og:description"
    content="A The Thing port designed for running in vanilla JavaScript pre-ECMAScript 2015 (no WebAssembly) ">

  <meta name="twitter:description"
    content="A The Thing port designed for running in vanilla JavaScript pre-ECMAScript 2015 (no WebAssembly) ">

  <link rel="apple-touch-icon" href="https://cdn.sdappnet.cloud/rtx/images/betateam.png" sizes="180x180">

  <link rel="apple-touch-icon" href="https://cdn.sdappnet.cloud/rtx/images/betateam.png" sizes="180x180">

  <style>
    html,
    body {
      padding: 0;
      margin: 0;
      max-width: 100vw;
      max-height: 100vh;
      overflow: hidden;
      overscroll-behavior: none;
      background-color: #000;
      touch-action: none;
      user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      -webkit-tap-highlight-color: transparent
    }

    /* Remove or modify these cursor rules from body */
    body {
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
      user-select: none !important;
    }

    .logo {
      position: fixed;
      left: 0px;
      top: -30px;
      width: 100%;
      height: 100%;
      background-size: 75% auto;
      background-position: center center;
      background-repeat: no-repeat;
      background-image: url("https://cdn.sdappnet.cloud/rtx/images/TheThing.png");
      cursor: url("https://raw.githubusercontent.com/ProjectIGIRemakeTeam/TheThing/refs/heads/master/images/cursor.png"), default !important;
      /* cursor from here - it's set below */
      border: 1px solid black !important;
    }

    .blizzard {
      position: fixed;
      left: 0px;
      top: 0px;
      width: 100%;
      height: 100%;
      background-size: 100% auto;
      background-position: center center;
      background-repeat: no-repeat;
      background-image: url("https://raw.githubusercontent.com/ProjectIGIRemakeTeam/TheThing/refs/heads/master/images/blizzard.gif");
      opacity: 0.08;
    }

    #container {
      display: none
    }

    input[type=file] {
      display: none
    }

    #email {
      position: fixed;
      right: 0;
      bottom: 0;
      padding-right: 15px;
      line-height: 3.2;
      font-family: Arial;
      font-size: 16px;
      color: #fff;
      user-select: none;
      -webkit-user-select: none
    }

    #email a {
      text-decoration: none;
      color: #fff;
      background-color: transparent;
      border: 0;
      outline: 0
    }

    #email a:focus {
      text-decoration: none;
      outline: 1px solid #fff
    }

    #demo-loader {
      display: none;
      position: fixed;
      left: 0;
      bottom: 10px;
      right: 0;
      width: 64px;
      height: 64px;
      margin: 0 auto;
      filter: drop-shadow(2px 2px 2px #000);
      cursor: pointer;
      background-color: transparent;
      border: 0;
      outline: 0
    }

    #demo-loader:focus {
      outline: 1px solid #fff
    }

    #demo-loader:hover {
      filter: brightness(110%)
    }

    #file-selector {
      display: none;
      position: fixed;
      left: 0;
      bottom: 10px;
      right: 0;
      width: 64px;
      height: 64px;
      margin: 0 auto;
      filter: drop-shadow(2px 2px 2px #000);
      cursor: pointer;
      background-color: transparent;
      border: 0;
      outline: 0
    }

    #file-selector:focus {
      outline: 1px solid #fff
    }

    #file-selector:hover {
      filter: brightness(110%)
    }

    #game {
      width: 100vw;
      height: 100vh
    }

    .pleasewait {
      position: fixed;
      width: 64px;
      height: 64px;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      margin: auto auto;
      border: 0
    }

    .lds-spinner {
      color: #fff;
      display: inline-block;
      position: relative;
      width: 64px;
      height: 64px
    }

    .lds-spinner div {
      transform-origin: 32px 32px;
      animation: lds-spinner 1.2s linear infinite
    }

    .lds-spinner div:after {
      content: " ";
      display: block;
      position: absolute;
      top: 3px;
      left: 29px;
      width: 5px;
      height: 14px;
      border-radius: 20%;
      background: #fff
    }

    .lds-spinner div:nth-child(1) {
      transform: rotate(0deg);
      animation-delay: -1.1s
    }

    .lds-spinner div:nth-child(2) {
      transform: rotate(30deg);
      animation-delay: -1s
    }

    .lds-spinner div:nth-child(3) {
      transform: rotate(60deg);
      animation-delay: -.9s
    }

    .lds-spinner div:nth-child(4) {
      transform: rotate(90deg);
      animation-delay: -.8s
    }

    .lds-spinner div:nth-child(5) {
      transform: rotate(120deg);
      animation-delay: -.7s
    }

    .lds-spinner div:nth-child(6) {
      transform: rotate(150deg);
      animation-delay: -.6s
    }

    .lds-spinner div:nth-child(7) {
      transform: rotate(180deg);
      animation-delay: -.5s
    }

    .lds-spinner div:nth-child(8) {
      transform: rotate(210deg);
      animation-delay: -.4s
    }

    .lds-spinner div:nth-child(9) {
      transform: rotate(240deg);
      animation-delay: -.3s
    }

    .lds-spinner div:nth-child(10) {
      transform: rotate(270deg);
      animation-delay: -.2s
    }

    .lds-spinner div:nth-child(11) {
      transform: rotate(300deg);
      animation-delay: -.1s
    }

    .lds-spinner div:nth-child(12) {
      transform: rotate(330deg);
      animation-delay: 0s
    }

    @keyframes lds-spinner {
      0% {
        opacity: 1
      }

      to {
        opacity: 0
      }
    }

    button {
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div id="game"></div>
  <div class="pleasewait">
    <div class="lds-spinner">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
  <div id="container">
    <div class="logo"></div>
    <div class="blizzard"></div>
    <button id="demo-loader">
      <svg width="100%" height="100%" viewBox="0 0 502 502">
        <circle fill="#FFF" cx="250" cy="250" r="200" />
        <path fill="#b9180b"
          d="M251,1C112.929,1,1,112.929,1,251s111.929,250,250,250s250-111.929,250-250S389.071,1,251,1z M164.75,366  V136l230,115L164.75,366z" />
      </svg>
    </button>
    <button id="file-selector">
      <svg width="100%" height="100%" viewBox="0 0 502 502">
        <circle fill="#FFF" cx="250" cy="250" r="200" />
        <path fill="#b9180b"
          d="M251,1C112.929,1,1,112.929,1,251s111.929,250,250,250s250-111.929,250-250S389.071,1,251,1z   M251.283,111.853L351,236.738h-56.935v73.761H208.51v-73.761h-56.941L251.283,111.853z M208.51,336.122v-19.418h85.556v19.418  H208.51z M294.065,341.665v10.186H208.51v-10.186H294.065z M391,380.147c0,5.522-4.477,10-10,10H121c-5.523,0-10-4.478-10-10  v-72.935c0-5.743,4.643-10.399,10.37-10.399s10.37,4.656,10.37,10.399v62.194h238.52v-62.194c0-5.743,4.643-10.399,10.37-10.399  S391,301.47,391,307.213V380.147z" />
      </svg>
    </button>
    <input type="file" id="file-input" multiple>
    <!-- Bottom buttons -->
    <div>
      <div id="os-buttons" style="display: none; position: fixed; bottom: 10px; left: 10px; z-index: 10000;">
        <button id="macos-btn" class="os-btn"
          style="background: transparent; border: none; padding: 0; margin-right: 10px;">
          <img src="images/macos.png" alt="macOS" style="width: 32px; height: 32px;">
        </button>
        <button id="windows-btn" class="os-btn"
          style="background: transparent; border: none; padding: 0; margin-right: 10px;">
          <img src="images/windows.png" alt="Windows" style="width: 32px; height: 32px;">
        </button>
        <button id="controller-btn" class="os-btn"
          style="background: transparent; border: none; padding: 0;  margin-right: 10px;">
          <img src="images/controller-js.png" alt="controller-js" style="width: 32px; height: 32px;">
        </button>
        <button id="touchpad-btn" class="os-btn" style="background: transparent; border: none; padding: 0;">
          <img src="images/touchpad.png" alt="touchpad-js" style="width: 32px; height: 32px;">
        </button>
      </div>
      <div id="tech-buttons" style="display: none; position: fixed; bottom: 10px; right: 10px; z-index: 10000;">
        <button id="q3-btn" class="tech-btn"
          style="background: transparent; border: none; padding: 0; margin-right: 10px;">
          <img src="images/q3.png" alt="Quake 3" style="width: 32px; height: 32px;">
        </button>
        <button id="js-btn" class="tech-btn" style="background: transparent; border: none; padding: 0;">
          <img src="images/js.png" alt="JavaScript" style="width: 32px; height: 32px;">
        </button>
      </div>
    </div>
  </div>
  <!-- Quake3-engine-js -->
  <script src="Quake3.min.js"></script>
  <!-- Quake3-engine-js-pad-controls -->
  <script src="electron_padcontrols.js"></script>
  <script src="electron_touchcontrols.js"></script>
  <!-- Quake3-engine-js-electron -->
  <script src="electron_macosx.js"></script>
  <!-- Quake3-engine-js-run-game -->
  <script>
    var container = document.getElementById("container")
    var gameWrapper = document.getElementById("game")
    var demoLoader = document.getElementById("demo-loader")
    var fileSelector = document.getElementById("file-selector")
    var fileInput = document.getElementById("file-input")
    var pleaseWait = document.querySelector(".pleasewait")

    window.addEventListener("load", function () {
      if (window.top == window.self) {
        pleaseWait.style.display = "none"
        container.style.display = "block"

        var currentURL = new URL(window.location.href).searchParams
        var demoRequired = currentURL.has("demo")

        if (demoRequired) {
          demoLoader.style.display = "block"
          demoLoader.tabIndex = 1
        } else {
          fileSelector.style.display = "block"
          fileSelector.tabIndex = 1
        }

        gameWrapper.addEventListener("contextmenu", function (event) {
          event.preventDefault()
        })

        fileSelector.addEventListener("click", function () {
          fileInput.click()
        })

        demoLoader.addEventListener("click", function (event) {
          container.style.display = "none"
          pleaseWait.style.display = "block"

          // no fetch here because the entire project
          // is compatible with pre 2015 environments.
          var xhr = new XMLHttpRequest()
          xhr.open("GET", "DEMO.pk3", true)
          xhr.responseType = "arraybuffer"
          xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
              var blob = new Blob([xhr.response], {
                type: "application/octet-stream",
              })
              blob.name = "pak0.pk3"

              embedQuake3({
                container: "game",
                files: [blob],
                cbStarted: function cbStarted() {
                  pleaseWait.style.display = "none"
                },
              })
            }
          }

          xhr.send(null)
        })

        fileInput.addEventListener("change", function (event) {
          var files = event.target.files
          var hasPk3 = false

          for (var i = 0; i < files.length; i++) {
            if (
              files[i].name.toLowerCase().indexOf(".pk3") ===
              files[i].name.length - 4
            ) {
              hasPk3 = true
              break
            }
          }

          if (!hasPk3) {
            location.reload()
            return
          }

          container.style.display = "none"
          pleaseWait.style.display = "block"

          embedQuake3({
            container: "game",
            files: event.target.files,
            cbStarted: function cbStarted() {
              pleaseWait.style.display = "none"
            },
          })
        })

        window.addEventListener("keydown", function (event) {
          var KEY_CTRL = event.ctrlKey || event.metaKey
          var KEY_P = event.code === "KeyP"
          var KEY_F = event.code === "KeyF"

          if (KEY_CTRL && KEY_P) {
            event.preventDefault()
            downloadProfileFileQuake3()
          }

          if (KEY_CTRL && KEY_F) {
            event.preventDefault()
            requestFullscreenQuake3()
          }
        })
      }
    })
  </script>
  <script>
      // Add this script after your existing game script
      (function () {
        'use strict';

        // Get references to the button containers
        const osButtons = document.getElementById('os-buttons');
        const techButtons = document.getElementById('tech-buttons');

        // Check if elements exist
        if (!osButtons || !techButtons) {
          console.error('Button containers not found');
          return;
        }

        // Variables for hover detection
        let showButtons = false;
        let hoverTimeout = null;
        const BOTTOM_THRESHOLD = 0.3; // 30% from bottom

        // Function to check if mouse is in bottom 30% of screen
        function isInBottomZone(y) {
          const windowHeight = window.innerHeight;
          const threshold = windowHeight * (1 - BOTTOM_THRESHOLD);
          return y >= threshold;
        }

        // Function to show buttons
        function showAllButtons() {
          if (!showButtons) {
            showButtons = true;
            osButtons.style.display = 'block';
            techButtons.style.display = 'block';
          }
        }

        // Function to hide buttons
        function hideAllButtons() {
          if (showButtons) {
            showButtons = false;
            osButtons.style.display = 'none';
            techButtons.style.display = 'none';
          }
        }

        // Mouse move handler
        function handleMouseMove(e) {
          const mouseY = e.clientY;

          if (isInBottomZone(mouseY)) {
            // Mouse is in bottom zone, show buttons
            clearTimeout(hoverTimeout);
            showAllButtons();

            // Set timeout to hide buttons when mouse leaves bottom zone
            hoverTimeout = setTimeout(() => {
              if (!isInBottomZone(mouseY)) {
                hideAllButtons();
              }
            }, 500);
          } else {
            // Mouse is NOT in bottom zone
            clearTimeout(hoverTimeout);
            hideAllButtons();
          }
        }

        // Mouse leave handler for window
        function handleMouseLeave() {
          clearTimeout(hoverTimeout);
          hideAllButtons();
        }

        // Button click handlers (empty for now)
        // Button click handlers (empty for now)
        function setupButtonHandlers() {
          const buttons = [
            { id: 'macos-btn', name: 'macOS' },
            { id: 'windows-btn', name: 'Windows' },
            { id: 'controller-btn', name: 'Controller' },
            { id: 'touchpad-btn', name: 'Touchpad' },
            { id: 'q3-btn', name: 'Quake3' },
            { id: 'js-btn', name: 'JavaScript' }
          ];

          buttons.forEach(button => {
            const btnElement = document.getElementById(button.id);
            if (btnElement) {
              btnElement.addEventListener('click', function (e) {
                e.preventDefault();
                console.log(`${button.name} button clicked`);
                let url = '';

                if (button.name == "macOS") {
                  // Add macOS related URL
                } else if (button.name == "Windows") {
                  // Add Windows related URL
                } else if (button.name == "Controller") {
                  // Add Windows related URL
                } else if (button.name == "Touchpad") {
                  // Add Windows related URL
                } else if (button.name == "Quake3") {
                  url = 'https://github.com/inolen/quakejs';
                } else if (button.name == "JavaScript") {
                  url = 'https://en.wikipedia.org/wiki/ECMAScript';
                }
                // If a URL is defined, open it in a new tab
                if (url) {
                  window.open(url, '_blank');
                }
                // Empty click handler for now
              });
            }
          });
        }

        // Initialize everything when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
          setupButtonHandlers();

          // Add event listeners
          document.addEventListener('mousemove', handleMouseMove);
          document.addEventListener('mouseleave', handleMouseLeave);

          // Also hide buttons on scroll (optional)
          window.addEventListener('scroll', hideAllButtons);
        });

        // Clean up on page unload
        window.addEventListener('unload', function () {
          document.removeEventListener('mousemove', handleMouseMove);
          document.removeEventListener('mouseleave', handleMouseLeave);
          window.removeEventListener('scroll', hideAllButtons);
        });

      })();
  </script>
</body>

</html>